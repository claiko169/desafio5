<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Desafío 5</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 30px 15px;
      font-family: 'Courier New', Courier, monospace;
      color: white;
      text-align: center;
      background: linear-gradient(135deg, #ff9a8b, #ff6a88, #ff4f92);
      transition: background 1s, color 1s;
      position: relative;
    }

    canvas#estrellas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
    }

    h1 {
      font-size: 2.5em;
      margin-bottom: 20px;
      transition: color 0.5s;
    }

    .album {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 15px;
      max-width: 800px;
      margin: 0 auto;
    }

    .album img {
      width: 100%;
      max-width: 150px;
      border-radius: 15px;
      box-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
      transition: transform 0.3s;
    }

    .album img:hover {
      transform: scale(1.05);
    }

    .pregunta {
      margin-top: 40px;
    }

    .pregunta img {
      width: 200px;
      border-radius: 20px;
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);
    }

    .botones {
      margin-top: 25px;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 15px;
    }

    button {
      padding: 12px 25px;
      font-size: 1.2em;
      border: none;
      border-radius: 25px;
      cursor: pointer;
      transition: all 0.3s ease;
      z-index: 10;
      position: relative;
    }

    .si {
      background-color: #a3ffba;
      color: #003300;
    }

    .si:hover {
      background-color: #8fffaa;
    }

    .no {
      background-color: #ff6a6a;
      color: white;
    }

    .no:hover {
      background-color: #ff5050;
    }

    .glitch {
      animation: glitch 0.3s infinite;
    }

    @keyframes glitch {
      0% { transform: translate(0); }
      20% { transform: translate(-2px, 2px); }
      40% { transform: translate(2px, -2px); }
      60% { transform: translate(-2px, -2px); }
      80% { transform: translate(2px, 2px); }
      100% { transform: translate(0); }
    }

    #amenaza {
      font-size: 1.2em;
      margin-top: 30px;
      min-height: 1.5em;
    }

    #toggleMusica {
      margin-top: 20px;
      background-color: #ffe0f0;
      color: #8b005d;
    }

    #toggleMusica:hover {
      background-color: #ffc1e3;
    }
  </style>
</head>
<body>

  <canvas id="estrellas"></canvas>

  <h1 id="titulo">¿Quieres ser mi novia? ❤️</h1>

  <div class="album">
    <img src="us.jpg" alt="Foto 1">
    <img src="us2.jpg" alt="Foto 2">
    <img src="us3.jpg" alt="Foto 3">
    <img src="us4.jpg" alt="Foto 4">
    <img src="us5.jpg" alt="Foto 5">
  </div>

  <div class="pregunta">
    <img src="novia.jpg" alt="Novia">
  </div>

  <div class="botones" id="botones">
    <button class="si" id="btnSi" onclick="aceptar()">Sí</button>
    <button class="no" id="btnNo" onclick="negar()">No</button>
  </div>

  <button id="toggleMusica" onclick="toggleMusica()">Pausar música ⏸️</button>

  <p id="amenaza"></p>

  <audio id="musica" autoplay loop>
    <source src="si.mp3" type="audio/mpeg">
  </audio>

  <audio id="efecto" src="glitch.mp3"></audio>

  <script>
    let contadorNo = 0;
    let musica = document.getElementById("musica");
    const amenazas = [
      "No deberías haber hecho eso.",
      "Te estoy observando.",
      "Cada vez estás más cerca del final...",
      "¿Por qué sigues pulsando?",
      "No hay escapatoria.",
      "Esto no es un juego para ti.",
      "Enserio para.",
      "Me estas rompiendo el corazon.",
      "Porfavor..Ally piensalo.",
      "....",
      "No  te soy suficiente?.",
      "agh...",
      "No sigas",
      "De verdad quieres decir que no?",
      "Esta bien...ya dejo de insistir",
      "De verdad creías que te iba a dejar así como así? No... ¡NO TIENES ESCAPATORIA!",
    ];

    function aceptar() {
      window.location.href = "https://claiko169.github.io/si/";
    }

    function negar() {
      contadorNo++;

      document.getElementById("efecto").play();
      document.body.style.background = "#000";
      document.body.style.color = "red";
      document.getElementById("titulo").style.color = "red";

      const amenaza = amenazas[(contadorNo - 1) % amenazas.length];
      document.getElementById("amenaza").textContent = amenaza;

      if (contadorNo === 16) {
        document.getElementById("btnNo").remove();

        musica.src = "terror.mp3";
        musica.play();

        const botonesDiv = document.getElementById("botones");
        for (let i = 0; i < 20; i++) {
          const nuevoBtn = document.createElement("button");
          nuevoBtn.className = "si glitch";
          nuevoBtn.textContent = "Sí";
          nuevoBtn.onclick = aceptar;
          nuevoBtn.style.position = "absolute";
          nuevoBtn.style.left = Math.random() * window.innerWidth + "px";
          nuevoBtn.style.top = Math.random() * window.innerHeight + "px";
          botonesDiv.appendChild(nuevoBtn);
        }
      }
    }

    function toggleMusica() {
      const btn = document.getElementById("toggleMusica");
      if (musica.paused) {
        musica.play();
        btn.textContent = "Pausar música ⏸️";
      } else {
        musica.pause();
        btn.textContent = "Reproducir música ▶️";
      }
    }

    // Estrellas animadas
    const canvas = document.getElementById("estrellas");
    const ctx = canvas.getContext("2d");

    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }

    window.addEventListener("resize", resizeCanvas);
    resizeCanvas();

    let estrellas = [];
    for (let i = 0; i < 100; i++) {
      estrellas.push({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        r: Math.random() * 1.5 + 0.5,
        alpha: Math.random(),
        delta: Math.random() * 0.02 + 0.005
      });
    }

    function animarEstrellas() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      estrellas.forEach(e => {
        ctx.beginPath();
        ctx.globalAlpha = e.alpha;
        ctx.arc(e.x, e.y, e.r, 0, Math.PI * 2);
        ctx.fillStyle = "#fff";
        ctx.fill();
        e.alpha += e.delta;
        if (e.alpha <= 0 || e.alpha >= 1) e.delta = -e.delta;
      });
      ctx.globalAlpha = 1;
      requestAnimationFrame(animarEstrellas);
    }

    animarEstrellas();
  </script>

</body>
</html>
